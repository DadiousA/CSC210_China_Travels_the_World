<html>

<!--

Lectures 11 and 12 - CSC 210 Fall 2015
Philip Guo

This is the frontend for the Fakebook web app, which demonstrates CRUD
with Ajax using a REST API. (../server.js is the backend)

Start ../server.js and then visit this URL to view this webpage:

http://localhost:3000/fakebook.html

-->

<head>
<title>Wanyou</title>
<style type="text/css">
     
      img {
        width: 300px;
      }
      p#myLine {
        color: red;
      }
    </style>
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>

<script type="text/javascript">

$(document).ready(function() {
  var d = new Date();
  $("#time").html("The current time is " + d+'.');
  // define a generic Ajax error handler:
  // http://api.jquery.com/ajaxerror/
  $(document).ajaxError(function() {
    alert("Sorry, there was a problem!");
  });


  $("#createButton").click(function() {
    console.log("444");
    $.ajax({
      // The URL for the request -- note the simple REST API!
      // all URLs are relative to http://localhost:3000/
      url: "users/",
      type: "POST",
      dataType : "text", // this URL returns a plain text string, not JSON

      data : { name: $("#nameBox").val(),
               email: $("#emailBox").val(),
             },
      success: function( data ) {
        console.log("Our company received your application: ", data);
        if (data == 'OK') {
          $("#status").html("Welcome! You are now part of Wanyou!");
        } else {
          $("#status").html("Error: try again!");
        }
      },

    });
  });
 
  

 $("#logInButton").click(function() { 
    console.log("333");
    // From: http://learn.jquery.com/ajax/jquery-ajax-methods/
    // Using the core $.ajax() method
    $.ajax({
      // The URL for the request -- note the simple REST API!
      // all URLs are relative to http://localhost:3000/
      url: "users/" + $("#logInEmailBox").val(),
      type: "GET",
      dataType : "text", // this URL returns data in text format

      success: function( data ) {
        console.log("You received some data!", data);

        if (data) {
          $("#nameDiv").html("Hello, you are logged in! " + data);
        } else {
          $("#status").html("Error: could not find user!");
          // clear the profile display
        }
      },
    });
  });
/*
  $("#updateButton").click(function() {
    $.ajax({
      // The URL for the request -- note the simple REST API!
      // all URLs are relative to http://localhost:3000/
      url: "users/" + $("#nameBox").val(),
      type: "PUT",
      dataType : "text", // this URL returns a plain text string, not JSON

      data : { job: $("#jobBox").val(),
               pet: $("#petBox").val()
             },

      success: function( data ) {
        console.log("You received some data!", data);
        if (data == 'OK') {
          $("#status").html("Successfully updated user");
        } else {
          $("#status").html("Error: could not update user");
        }
      },
    });
  });

  $("#deleteButton").click(function() {
    $.ajax({
      // The URL for the request -- note the simple REST API!
      // all URLs are relative to http://localhost:3000/
      url: "users/" + $("#nameBox").val(),
      type: "DELETE",
      dataType : "text", // this URL returns a plain text string, not JSON

      success: function( data ) {
        console.log("You received some data!", data);
        if (data == 'OK') {
          $("#status").html("Successfully deleted!");
        } else {
          $("#status").html("Error: could not delete!");
        }
      },
    });
  });
  */
});

</script>

</head>
  <body>
  <h1>Welcome to Wanyou!</h1>
  <p>Our website is dedicated to sharing traveling information! Each week we select one image as la plus belle .</p>
  <div id="time"></div>
  <p>Visit Paris:</p>
  <img src="index_eiffel.jpg"/>
  <p>Visit Geneva:</p>
  <img src="index_geneva.jpg"/>
  <br>
  Email Log In: <input id="logInEmailBox" type="text" size="20"/>
  <button id="logInButton">Sign in</button>
   
  
    <p>
    Name: <input id="nameBox" type="text" size="20"/>
    Email: <input id="emailBox" type="text" size="20"/>
 
    <button id="createButton">Sign up</button>
    <!--<button id="readButton">Read user's profile</button>
    <button id="updateButton">Update user's profile</button>
    <button id="deleteButton">Delete user</button> -->
    </p>

    <!-- empty placeholders -->
    <div id="nameDiv"></div>
    <div id="emailDiv"></div>
   <!-- <img id="profileImage" style="width: 300px;"/>-->

    <hr/>

    <div id="status"></div>
  </body>
</html>
